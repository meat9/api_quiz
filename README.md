# Quiz API
API для системы опросов пользователей

### Описание функционала
##### Функционал для администратора системы:
- Авторизация в системе (без регистрации)
- Добавление/изменение/удаление опросов. Атрибуты опроса: название, дата старта, дата окончания, описание. После создания поле "дата старта" у опроса менять нельзя
- Добавление/изменение/удаление вопросов в опросе. Атрибуты вопросов: текст вопроса, тип вопроса (ответ текстом, ответ с выбором одного варианта, ответ с выбором нескольких вариантов)

##### Функционал для пользователей системы:
- Получение списка активных опросов
- Прохождение опроса: опросы можно проходить анонимно, в качестве идентификатора пользователя в API передаётся числовой ID, по которому сохраняются ответы пользователя на вопросы; один пользователь может участвовать в любом количестве опросов
- Получение пройденных пользователем опросов с детализацией по ответам (что выбрано) по ID уникальному пользователя

------------------------------------------------------------------------------------------------------------------------------------------------------------------

#### Установка:
1. Склонируйте репозиторий
2. Создайте и войдите в вирутальное окружение
3. Установите зависимости (если появится ошибка при вызове pip3/python3 - попробуйте запустить команды без цифры 3):
    - `pip3 install -r requirements.txt`
5. Проведите миграции
    - `python3 manage.py makemigrations api`
    - `python3 manage.py migrate`
6. Создайте суперпользователя
    - `python3 manage.py createsuperuser`
7. Запустите тестовый сервер
    - `python3 manage.py runserver`
------------------------------------------------------------------------------------------------------------------------------------------------------------------
### Документация по API
   
#### Алгоритм авторизации пользователей

##### Через Basic Auth
1. При отправке запроса передавайте username и password в заголовке Authorization: Basic <реквизиты>

##### Через JWT-токен
1. Пользователь отправляет запрос с параметрами `username` и `password` на `/api/token/`, в ответе на запрос ему приходит `token` (JWT-токен) в поле access.
2. При отправке запроса передавайте токен в заголовке Authorization: Bearer <токен>
(Для включения авторизации по JWT токену раскомментируйте раздел REST_FRAMEWORK в settings.py)

### Примеры запросов
#### Доступ для посльзователей с правами "Администратор"
##### Добавление опросов (POST)
- URL: `/api/quizs/`
- QUERY PARAMETERS: `name`, `end_date`, `description`

##### Изменение/удаление опросов (PUT, DELETE)
- URL: `/api/quizs/<quiz_id>/`

##### Добавление вопросов к опросу (POST)
- URL: `/api/quizs/<quiz_id>/questions/`
- QUERY PARAMETERS: `text`, `type_question`(text_field or radio or check_boxes), `quiz`

##### Изменение/удаление вопросов (PUT, DELETE)
- URL: `/api/quizs/<quiz_id>/questions/<question_id>/`

##### Добавление и просмотр вариантов ответа к вопросу (POST, GET)
- URL: `/api/quizs/<quiz_id>/questions/<question_id>/choices/`
- QUERY PARAMETERS: `name`


#### Доступ для посльзователей с правами "Авторизованный пользователь"
##### Прохождение опроса (POST)
- URL: `/api/quizs/<quiz_id>/questions/<question_id>/answers/`
- QUERY PARAMETERS: `many_choice`, `one_choice`, `self_text`

##### Получение пройденных пользователем опросов (GET)
- URL: `/api/my_quizs/`


#### Доступ для любого пользователя
##### Получение списка активных опросов (GET)
- URL: `/api/active_quizs/`

------------------------------------------------------------------------------------------------------------------------------------------------------------------
## Технологии
Python,
Django 2.2.10,
Django REST framework,
